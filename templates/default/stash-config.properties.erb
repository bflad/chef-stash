#
#  Dynamically generated by Chef on <%= node["fqdn"] %>
#  Local modifications will be overwritten by Chef.
#

db.pool.idle.testInterval=<%= @database['testInterval'] %>

<% case @database['type'] %>
<% when "hsqldb" %>
jdbc.driver=org.hsqldb.jdbcDriver
jdbc.url=jdbc:hsqldb:${stash.home}/data/db;shutdown=true
<% when "mysql" %>
jdbc.driver=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://<%= @database['host'] == "localhost" && node['mysql']['bind_address'] != '0.0.0.0' ? node['mysql']['bind_address'] : @database['host'] %>:<%= @database['port'] %>/<%= @database['name'] %><%= @database['query_string'] %>
<% when "postgresql" %>
jdbc.driver=org.postgresql.Driver
jdbc.url=jdbc:postgresql://<%= @database['host'] %>:<%= @database['port'] %>/<%= @database['name'] %><%= @database['query_string'] %>
<% when "sqlserver" %>
jdbc.driver=com.microsoft.sqlserver.jdbc.SQLServerDriver
jdbc.url=jdbc:sqlserver://<%= @database['host'] %>:<%= @database['port'] %>;databaseName=<%= @database['name'] %>;<%= @database['query_string'] %>
<% end %>
jdbc.user=<%= @database['user'] %>
jdbc.password=<%= @database['password'] %>

<% if @plugin && !@plugin.empty? -%>
# DEPRECATED: use properties instead
<% @plugin.each do |key, value| -%>
plugin.<%= key %>=<%= value %>
<% end -%>
<% end -%>

<% if @properties -%>
<% @properties.each do |key, value| -%>
<%= key %>=<%= value %>
<% end -%>
<% end -%>
